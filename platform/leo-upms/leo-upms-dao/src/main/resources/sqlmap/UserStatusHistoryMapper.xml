<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="UserStatusHistory">
	<sql id="getSequence">
		select nextval('userstatushistory') as id
	</sql>
	<resultMap id="UserStatusHistoryResult"
		type="com.leo.platform.upms.entity.userstatushistory.UserStatusHistory">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 30 
			12:38:13 GMT+08:00 2016. -->
		<id column="id" property="id" jdbcType="BIGINT" />
		<result column="crudType" property="crudType" jdbcType="VARCHAR" />
		<result column="code" property="code" jdbcType="VARCHAR" />
		<result column="createTime" property="createTime" jdbcType="TIMESTAMP" />
		<result column="creator" property="creator" jdbcType="VARCHAR" />
		<result column="creatorName" property="creatorName" jdbcType="VARCHAR" />
		<result column="lastUpdateTime" property="lastUpdateTime"
			jdbcType="TIMESTAMP" />
		<result column="lastUpdator" property="lastUpdator" jdbcType="VARCHAR" />
		<result column="lastUpdatorName" property="lastUpdatorName"
			jdbcType="VARCHAR" />
		<result column="version" property="version" jdbcType="VARCHAR" />
		<result column="optLock" property="optLock" jdbcType="BIGINT" />
		<result column="remark" property="remark" jdbcType="VARCHAR" />
		<result column="note" property="note" jdbcType="VARCHAR" />

		<result column="user_id" property="userId" jdbcType="BIGINT" />
		<result column="status" property="status" jdbcType="VARCHAR" />
		<result column="reason" property="reason" jdbcType="VARCHAR" />
		<result column="op_user_id" property="opUserId" jdbcType="BIGINT" />
		<result column="op_date" property="opDate" jdbcType="TIMESTAMP" />
	</resultMap>

	<sql id="userStatusHistoryColumns">
		t.id as id,
		t.crudType as crudType,
		t.code as code,
		t.createTime as
		createTime,
		t.creator as creator,
		t.creatorName as
		creatorName,
		t.lastUpdateTime as lastUpdateTime,
		t.lastUpdator as
		lastUpdator,
		t.lastUpdatorName as lastUpdatorName,
		t.version as version,
		t.optLock as
		optLock,
		t.remark as remark,
		t.note as note,

		t.user_id as
		userId,
		t.status as status,
		t.reason as reason,
		t.op_user_id as
		opUserId,
		t.op_date as opDate
	</sql>

	<sql id="SO_Where_Clause_Like">
		<where>
			1 = 1
			<if test="@com.leo.platform.common.util.StringUtil@isNotBlank( userId )">
				AND t.user_id LIKE CONCAT('%',#{userId},'%')
			</if>
			<include refid="common_sql" />
		</where>
	</sql>

	<sql id="SO_Where_Clause">
		<where>
			1 = 1
			<if test="@com.leo.platform.common.util.StringUtil@isNotBlank( userId )">
				AND t.user_id = #{userId}
			</if>
			<include refid="common_sql" />
		</where>
	</sql>

	<sql id="common_sql"></sql>

	<select id="getListByModel"
		parameterType="com.leo.platform.upms.model.userstatushistory.UserStatusHistoryModel"
		resultMap="UserStatusHistoryResult">
		select
		<include refid="userStatusHistoryColumns" />
		from sys_user_status_history
		<choose>
			<when test="like">
				<include refid="SO_Where_Clause_Like" />
			</when>
			<otherwise>
				<include refid="SO_Where_Clause" />
			</otherwise>
		</choose>
	</select>

	<insert id="insert"
		parameterType="com.leo.platform.upms.entity.userstatushistory.UserStatusHistory">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 30 
			17:54:20 GMT+08:00 2016. -->
		<selectKey keyProperty="id" resultType="long" order="BEFORE">
			<include refid="getSequence" />
		</selectKey>
		insert into sys_user_status_history
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="crudtype != null">
				crudType,
			</if>
			<if test="code != null">
				code,
			</if>
			<if test="createtime != null">
				createTime,
			</if>
			<if test="creator != null">
				creator,
			</if>
			<if test="creatorname != null">
				creatorName,
			</if>
			<if test="lastupdatetime != null">
				lastUpdateTime,
			</if>
			<if test="lastupdator != null">
				lastUpdator,
			</if>
			<if test="lastupdatorname != null">
				lastUpdatorName,
			</if>
			<if test="version != null">
				version,
			</if>
			<if test="optlock != null">
				optLock,
			</if>
			<if test="remark != null">
				remark,
			</if>
			<if test="note != null">
				note,
			</if>
			<if test="userId != null">
				user_id,
			</if>
			<if test="status != null">
				status,
			</if>
			<if test="reason != null">
				reason,
			</if>
			<if test="opUserId != null">
				op_user_id,
			</if>
			<if test="opDate != null">
				op_date,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=BIGINT},
			</if>
			<if test="crudtype != null">
				#{crudtype,jdbcType=VARCHAR},
			</if>
			<if test="code != null">
				#{code,jdbcType=VARCHAR},
			</if>
			<if test="createtime != null">
				#{createtime,jdbcType=TIMESTAMP},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="creatorname != null">
				#{creatorname,jdbcType=VARCHAR},
			</if>
			<if test="lastupdatetime != null">
				#{lastupdatetime,jdbcType=TIMESTAMP},
			</if>
			<if test="lastupdator != null">
				#{lastupdator,jdbcType=VARCHAR},
			</if>
			<if test="lastupdatorname != null">
				#{lastupdatorname,jdbcType=VARCHAR},
			</if>
			<if test="version != null">
				#{version,jdbcType=VARCHAR},
			</if>
			<if test="optlock != null">
				#{optlock,jdbcType=BIGINT},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
			<if test="note != null">
				#{note,jdbcType=VARCHAR},
			</if>
			<if test="userId != null">
				#{userId,jdbcType=BIGINT},
			</if>
			<if test="status != null">
				#{status,jdbcType=VARCHAR},
			</if>
			<if test="reason != null">
				#{reason,jdbcType=VARCHAR},
			</if>
			<if test="opUserId != null">
				#{opUserId,jdbcType=BIGINT},
			</if>
			<if test="opDate != null">
				#{opDate,jdbcType=TIMESTAMP},
			</if>
		</trim>
	</insert>

	<update id="update"
		parameterType="com.leo.platform.upms.entity.userstatushistory.UserStatusHistory">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 30 
			17:54:20 GMT+08:00 2016. -->
		update sys_user_status_history
		<set>
			<if test="id != null">
				id = #{id,jdbcType=BIGINT},
			</if>
			<if test="crudtype != null">
				crudType = #{crudtype,jdbcType=VARCHAR},
			</if>
			<if test="code != null">
				code = #{code,jdbcType=VARCHAR},
			</if>
			<if test="createtime != null">
				createTime = #{createtime,jdbcType=TIMESTAMP},
			</if>
			<if test="creator != null">
				creator = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="creatorname != null">
				creatorName = #{creatorname,jdbcType=VARCHAR},
			</if>
			<if test="lastupdatetime != null">
				lastUpdateTime = #{lastupdatetime,jdbcType=TIMESTAMP},
			</if>
			<if test="lastupdator != null">
				lastUpdator = #{lastupdator,jdbcType=VARCHAR},
			</if>
			<if test="lastupdatorname != null">
				lastUpdatorName = #{lastupdatorname,jdbcType=VARCHAR},
			</if>
			<if test="version != null">
				version = #{version,jdbcType=VARCHAR},
			</if>
			<if test="optlock != null">
				optLock = #{optlock,jdbcType=BIGINT},
			</if>
			<if test="remark != null">
				remark = #{remark,jdbcType=VARCHAR},
			</if>
			<if test="note != null">
				note = #{note,jdbcType=VARCHAR},
			</if>
			<if test="userId != null">
				user_id = #{userId,jdbcType=BIGINT},
			</if>
			<if test="status != null">
				status = #{status,jdbcType=VARCHAR},
			</if>
			<if test="reason != null">
				reason = #{reason,jdbcType=VARCHAR},
			</if>
			<if test="opUserId != null">
				op_user_id = #{opUserId,jdbcType=BIGINT},
			</if>
			<if test="opDate != null">
				op_date = #{opDate,jdbcType=TIMESTAMP},
			</if>
		</set>
		where id = #{id,jdbcType=BIGINT}
	</update>
</mapper>