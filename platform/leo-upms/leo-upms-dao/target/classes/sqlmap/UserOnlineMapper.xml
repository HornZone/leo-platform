<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="UserOnline">
	<resultMap id="UserOnlineResult"
		type="com.leo.platform.upms.entity.useronline.UserOnline">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 30 
			12:38:13 GMT+08:00 2016. -->
		<id column="id" property="id" jdbcType="VARCHAR" />
		<result column="crudType" property="crudType" jdbcType="VARCHAR" />
		<result column="code" property="code" jdbcType="VARCHAR" />
		<result column="createTime" property="createTime" jdbcType="TIMESTAMP" />
		<result column="creator" property="creator" jdbcType="VARCHAR" />
		<result column="creatorName" property="creatorName" jdbcType="VARCHAR" />
		<result column="lastUpdateTime" property="lastUpdateTime"
			jdbcType="TIMESTAMP" />
		<result column="lastUpdator" property="lastUpdator" jdbcType="VARCHAR" />
		<result column="lastUpdatorName" property="lastUpdatorName"
			jdbcType="VARCHAR" />
		<result column="version" property="version" jdbcType="VARCHAR" />
		<result column="optLock" property="optLock" jdbcType="BIGINT" />
		<result column="remark" property="remark" jdbcType="VARCHAR" />
		<result column="note" property="note" jdbcType="VARCHAR" />

		<result column="user_id" property="userId" jdbcType="BIGINT" />
		<result column="username" property="username" jdbcType="VARCHAR" />
		<result column="host" property="host" jdbcType="VARCHAR" />
		<result column="system_host" property="systemHost" jdbcType="VARCHAR" />
		<result column="user_agent" property="userAgent" jdbcType="VARCHAR" />
		<result column="status" property="status" jdbcType="VARCHAR" />
		<result column="start_timestamp" property="startTimestamp"
			jdbcType="TIMESTAMP" />
		<result column="last_access_time" property="lastAccessTime"
			jdbcType="TIMESTAMP" />
		<result column="timeout" property="timeout" jdbcType="BIGINT" />

		<result column="session" property="session" jdbcType="VARCHAR" />
	</resultMap>
	<sql id="userOnlineColumns">
		t.id as id,
		t.crudType as crudType,
		t.code as code,
		t.createTime as
		createTime,
		t.creator as creator,
		t.creatorName as
		creatorName,
		t.lastUpdateTime as lastUpdateTime,
		t.lastUpdator as
		lastUpdator,
		t.lastUpdatorName as lastUpdatorName,
		t.version as version,
		t.optLock as
		optLock,
		t.remark as remark,
		t.note as note,

		t.user_id as
		userId,
		t.username as username,
		t.host as host,
		t.system_host as
		systemHost,
		t.user_agent as userAgent,
		t.status as status,
		t.start_timestamp as startTimestamp,
		t.last_access_time as
		lastAccessTime,
		t.timeout as timeout
	</sql>
	<sql id="SO_Where_Clause_Like">
		<where>
			1 = 1
			<if test=" userId !=null">
				AND t.user_id LIKE CONCAT('%',#{userId},'%')
			</if>
			<if test="@com.leo.platform.common.util.StringUtil@isNotBlank( username )">
				AND t.username LIKE CONCAT('%',#{username},'%')
			</if>
			<if test="@com.leo.platform.common.util.StringUtil@isNotBlank( host )">
				AND t.host LIKE CONCAT('%',#{host},'%')
			</if>
			<if
				test="@com.leo.platform.common.util.StringUtil@isNotBlank( systemHost )">
				AND t.system_host LIKE CONCAT('%',#{systemHost},'%')
			</if>
			<if
				test="@com.leo.platform.common.util.StringUtil@isNotBlank( userAgent )">
				AND t.user_agent LIKE CONCAT('%',#{userAgent},'%')
			</if>
			<if test="@com.leo.platform.common.util.StringUtil@isNotBlank( status )">
				AND t.status LIKE CONCAT('%',#{status},'%')
			</if>
			<if test=" timeout !=null">
				AND t.timeout LIKE CONCAT('%',#{timeout},'%')
			</if>

			<include refid="common_sql" />
		</where>
	</sql>

	<sql id="SO_Where_Clause">
		<where>
			1 = 1
			<if test=" userId !=null ">
				AND t.user_id = #{userId}
			</if>
			<if test="@com.leo.platform.common.util.StringUtil@isNotBlank( username )">
				AND t.username = #{username}
			</if>
			<if test="@com.leo.platform.common.util.StringUtil@isNotBlank( host )">
				AND t.host = #{host}
			</if>
			<if
				test="@com.leo.platform.common.util.StringUtil@isNotBlank( systemHost )">
				AND t.system_host = #{systemHost}
			</if>
			<if
				test="@com.leo.platform.common.util.StringUtil@isNotBlank( userAgent )">
				AND t.user_agent = #{userAgent}
			</if>
			<if test="@com.leo.platform.common.util.StringUtil@isNotBlank( status )">
				AND t.status = #{status}
			</if>
			<if test=" timeout !=null">
				AND t.timeout = #{timeout}
			</if>
			<include refid="common_sql" />
		</where>
	</sql>

	<sql id="common_sql">
		<if test="lastAccessTime != null">
            <![CDATA[and t.last_access_time <= #{lastAccessTime} ]]>
		</if>
	</sql>

	<insert id="insert" parameterType="com.leo.platform.upms.entity.useronline.UserOnline">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 30 
			17:54:20 GMT+08:00 2016. -->
		insert into sys_user_online
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="crudType != null">
				crudType,
			</if>
			<if test="code != null">
				code,
			</if>
			<if test="createTime != null">
				createTime,
			</if>
			<if test="creator != null">
				creator,
			</if>
			<if test="creatorName != null">
				creatorName,
			</if>
			<if test="lastUpdateTime != null">
				lastUpdateTime,
			</if>
			<if test="lastUpdator != null">
				lastUpdator,
			</if>
			<if test="lastUpdatorName != null">
				lastUpdatorName,
			</if>
			<if test="version != null">
				version,
			</if>
			<if test="optLock != null">
				optLock,
			</if>
			<if test="remark != null">
				remark,
			</if>
			<if test="note != null">
				note,
			</if>

			<if test="userId != null">
				user_id,
			</if>
			<if test="username != null">
				username,
			</if>
			<if test="host != null">
				host,
			</if>
			<if test="systemHost != null">
				system_host,
			</if>
			<if test="userAgent != null">
				user_agent,
			</if>
			<if test="status != null">
				status,
			</if>
			<if test="startTimestamp != null">
				start_timestamp,
			</if>
			<if test="lastAccessTime != null">
				last_access_time,
			</if>
			<if test="timeout != null">
				timeout,
			</if>
			<if test="session != null">
				session,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=BIGINT},
			</if>
			<if test="crudType != null">
				#{crudType,jdbcType=VARCHAR},
			</if>
			<if test="code != null">
				#{code,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=TIMESTAMP},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="creatorName != null">
				#{creatorName,jdbcType=VARCHAR},
			</if>
			<if test="lastUpdateTime != null">
				#{lastUpdateTime,jdbcType=TIMESTAMP},
			</if>
			<if test="lastUpdator != null">
				#{lastUpdator,jdbcType=VARCHAR},
			</if>
			<if test="lastUpdatorName != null">
				#{lastUpdatorName,jdbcType=VARCHAR},
			</if>
			<if test="version != null">
				#{version,jdbcType=VARCHAR},
			</if>
			<if test="optLock != null">
				#{optLock,jdbcType=BIGINT},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
			<if test="note != null">
				#{note,jdbcType=VARCHAR},
			</if>

			<if test="userId != null">
				#{userId,jdbcType=BIGINT},
			</if>
			<if test="username != null">
				#{username,jdbcType=VARCHAR},
			</if>
			<if test="host != null">
				#{host,jdbcType=VARCHAR},
			</if>
			<if test="systemHost != null">
				#{systemHost,jdbcType=VARCHAR},
			</if>
			<if test="userAgent != null">
				#{userAgent,jdbcType=VARCHAR},
			</if>
			<if test="status != null">
				#{status,jdbcType=VARCHAR},
			</if>
			<if test="startTimestamp != null">
				#{startTimestamp,jdbcType=TIMESTAMP},
			</if>
			<if test="lastAccessTime != null">
				#{lastAccessTime,jdbcType=TIMESTAMP},
			</if>
			<if test="timeout != null">
				#{timeout,jdbcType=BIGINT},
			</if>
			<if test="session != null">
				#{session,jdbcType=LONGVARCHAR},
			</if>
		</trim>
	</insert>
	<delete id="delete" parameterType="java.lang.String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Nov 01 
			20:42:02 GMT+08:00 2016. -->
		delete from sys_user_online
		where id = #{id,jdbcType=VARCHAR}
	</delete>
	<update id="update" parameterType="com.leo.platform.upms.entity.useronline.UserOnline">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 30 
			17:54:20 GMT+08:00 2016. -->
		update sys_user_online
		<set>
			<if test="crudtype != null">
				crudType = #{crudtype,jdbcType=VARCHAR},
			</if>
			<if test="code != null">
				code = #{code,jdbcType=VARCHAR},
			</if>
			<if test="createtime != null">
				createTime = #{createtime,jdbcType=TIMESTAMP},
			</if>
			<if test="creator != null">
				creator = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="creatorname != null">
				creatorName = #{creatorname,jdbcType=VARCHAR},
			</if>
			<if test="lastupdatetime != null">
				lastUpdateTime = #{lastupdatetime,jdbcType=TIMESTAMP},
			</if>
			<if test="lastupdator != null">
				lastUpdator = #{lastupdator,jdbcType=VARCHAR},
			</if>
			<if test="lastupdatorname != null">
				lastUpdatorName = #{lastupdatorname,jdbcType=VARCHAR},
			</if>
			<if test="version != null">
				version = #{version,jdbcType=VARCHAR},
			</if>
			<if test="optlock != null">
				optLock = #{optlock,jdbcType=BIGINT},
			</if>
			<if test="remark != null">
				remark = #{remark,jdbcType=VARCHAR},
			</if>
			<if test="note != null">
				note = #{note,jdbcType=VARCHAR},
			</if>
			<if test="userId != null">
				user_id = #{userId,jdbcType=BIGINT},
			</if>
			<if test="username != null">
				username = #{username,jdbcType=VARCHAR},
			</if>
			<if test="host != null">
				host = #{host,jdbcType=VARCHAR},
			</if>
			<if test="systemHost != null">
				system_host = #{systemHost,jdbcType=VARCHAR},
			</if>
			<if test="userAgent != null">
				user_agent = #{userAgent,jdbcType=VARCHAR},
			</if>
			<if test="status != null">
				status = #{status,jdbcType=VARCHAR},
			</if>
			<if test="startTimestamp != null">
				start_timestamp = #{startTimestamp,jdbcType=TIMESTAMP},
			</if>
			<if test="lastAccessTime != null">
				last_access_time = #{lastAccessTime,jdbcType=TIMESTAMP},
			</if>
			<if test="timeout != null">
				timeout = #{timeout,jdbcType=BIGINT},
			</if>
			<if test="session != null">
				session = #{session,jdbcType=LONGVARCHAR},
			</if>
		</set>
		where id = #{id,jdbcType=VARCHAR}
	</update>

	<select id="getById" parameterType="long" resultMap="UserOnlineResult">
		select
		<include refid="userOnlineColumns" />
		from sys_user_online t
		where id = #{id,jdbcType=BIGINT}
	</select>

	<select id="getAll" resultMap="UserOnlineResult">
		select
		<include refid="userOnlineColumns" />
		from sys_user_online t
	</select>

	<select id="getCountByModel"
		parameterType="com.leo.platform.upms.model.useronline.UserOnlineModel"
		resultType="long">
		SELECT COUNT(1) FROM sys_user_online t
		<choose>
			<when test="like">
				<include refid="SO_Where_Clause_Like" />
			</when>
			<otherwise>
				<include refid="SO_Where_Clause" />
			</otherwise>
		</choose>
	</select>

	<select id="getListByIds" parameterType="List" resultMap="UserOnlineResult">
		SELECT
		<include refid="userOnlineColumns" />
		FROM sys_user_online t WHERE t.id in
		<foreach collection="list" index="index" item="item" open="("
			close=")" separator=",">
			#{item}
		</foreach>
	</select>

	<select id="getListByField" resultMap="UserOnlineResult">
		SELECT
		<include refid="userOnlineColumns" />
		FROM sys_user_online t WHERE T.${fieldName} = #{colValue}
	</select>

	<select id="getListByModel"
		parameterType="com.leo.platform.upms.model.useronline.UserOnlineModel"
		resultMap="UserOnlineResult">
		SELECT
		<include refid="userOnlineColumns" />
		FROM sys_user_online t
		<choose>
			<when test="like">
				<include refid="SO_Where_Clause_Like" />
			</when>
			<otherwise>
				<include refid="SO_Where_Clause" />
			</otherwise>
		</choose>
	</select>
</mapper>